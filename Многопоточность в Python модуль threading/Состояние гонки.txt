Состояние гонки или race condition – это ошибка, возникающая при неправильном проектировании многопоточной программы. Она возникает тогда, когда несколько потоков обращаются к одним и тем же данным. Например, переменная хранит число, которое пытаются одновременно изменить потоки thread1 и thread2, что приводит к непредсказуемым результатам или ошибке.

Распространена ситуация, когда один поток проверяет значение переменной на выполнение условия, чтобы совершить какое-то действие, но между проверкой условия и выполнением действия вмешивается второй поток, который изменяет значение переменной, что приводит к получению неправильных результатов, например:

x = 5
# Thread 1:
if x == 5: # Поток 1 проверяет условие и считает его верным
# Thread 2:
x = 1 # Поток два изменяет значение переменной
# Thread 1:
print("При x = 5 функция 2*x =", 2 * x) # Поток один выполняет действие

В итоге программа выведет сообщение: «При x = 5 функция 2*x = 2».

Состояние гонки может приводить к различным проблемам:

    Утечки памяти.
    Потеря данных.
    Уязвимости в безопасности программы.
    Получение ошибочных результатов.
    Взаимные блокировки потоков.
